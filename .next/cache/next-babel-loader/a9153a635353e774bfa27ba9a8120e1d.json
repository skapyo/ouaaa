{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\skaPy\\\\IdeaProjects\\\\Next.js-boilerplate\\\\oozie-client\\\\containers\\\\forms\\\\SigninForm.tsx\";\n\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation login(\\n    $email: String!\\n    $password: String!\\n    $persistentConnection: Boolean!\\n  ) {\\n    login(\\n      email: $email\\n      password: $password\\n      persistentConnection: $persistentConnection\\n    ) {\\n      id\\n      surname\\n      lastname\\n      email\\n      role\\n      phone\\n      address\\n      postCode\\n      city\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport gql from \"graphql-tag\";\nimport { withApollo } from \"hoc/withApollo\";\nimport FormController from \"components/controllers/FormController\";\nimport { makeStyles, Box } from \"@material-ui/core\";\nimport { Container, Avatar, Typography, TextField, FormControlLabel, Checkbox, Grid } from \"@material-ui/core\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport ClassicButton from \"components/buttons/ClassicButton\";\nimport Link from \"components/Link\";\nimport { useMutation } from \"@apollo/react-hooks\";\nimport { useCallback, useState, useEffect } from \"react\";\nimport { useSessionDispatch } from \"context/session/session\";\nimport omitTypename from \"utils/omitTypename\";\nimport useGraphQLErrorDisplay from \"hooks/useGraphQLErrorDisplay\";\nimport useCookieRedirection from \"hooks/useCookieRedirection\";\nimport { ValidationRuleType } from \"components/controllers/FormController\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    paper: {\n      marginTop: theme.spacing(8),\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\"\n    },\n    avatar: {\n      margin: theme.spacing(1),\n      backgroundColor: theme.palette.secondary.main\n    },\n    box: {\n      width: \"100%\",\n      // Fix IE 11 issue.\n      marginTop: theme.spacing(1)\n    },\n    submit: {\n      margin: theme.spacing(3, 0, 2)\n    }\n  };\n});\nvar SIGNIN = gql(_templateObject());\nvar validationRules = {\n  email: {\n    rule: ValidationRuleType.required\n  },\n  password: {\n    rule: ValidationRuleType.required\n  }\n};\n\nvar SigninForm = function SigninForm() {\n  var _s = $RefreshSig$();\n\n  var Form = function Form(props) {\n    _s();\n\n    var formChangeHandler = props.formChangeHandler,\n        formValues = props.formValues,\n        validationResult = props.validationResult;\n\n    var _useMutation = useMutation(SIGNIN),\n        _useMutation2 = _slicedToArray(_useMutation, 2),\n        signin = _useMutation2[0],\n        _useMutation2$ = _useMutation2[1],\n        data = _useMutation2$.data,\n        error = _useMutation2$.error;\n\n    useGraphQLErrorDisplay(error);\n    var styles = useStyles();\n\n    var _useState = useState(false),\n        checkBoxChecked = _useState[0],\n        setCheckBoxChecked = _useState[1];\n\n    var sessionDispatch = useSessionDispatch();\n    var redirect = useCookieRedirection();\n    var checkBoxChangeHandler = useCallback(function (e) {\n      setCheckBoxChecked(e.target.checked);\n    }, [setCheckBoxChecked]);\n    var submitHandler2 = useCallback(function () {\n      signin({\n        variables: {\n          email: formValues.email,\n          password: formValues.password,\n          persistentConnection: checkBoxChecked\n        }\n      });\n    }, [checkBoxChecked, formValues, signin]);\n    useEffect(function () {\n      var _data$login;\n\n      if (data === null || data === void 0 ? void 0 : (_data$login = data.login) === null || _data$login === void 0 ? void 0 : _data$login.id) {\n        sessionDispatch({\n          type: \"login\",\n          payload: omitTypename(data.login)\n        });\n        redirect();\n      }\n    }, [data, sessionDispatch, redirect]);\n    return __jsx(Container, {\n      component: \"main\",\n      maxWidth: \"xs\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: styles.paper,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, __jsx(Avatar, {\n      className: styles.avatar,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, __jsx(LockOutlinedIcon, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    })), __jsx(Typography, {\n      component: \"h1\",\n      variant: \"h5\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, \"Connexion\"), __jsx(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      label: \"Email Address\",\n      name: \"email\",\n      autoComplete: \"current-email\",\n      autoFocus: true,\n      defaultValue: \"\",\n      value: formValues === null || formValues === void 0 ? void 0 : formValues.email,\n      onChange: formChangeHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }), __jsx(TextField, {\n      variant: \"outlined\",\n      margin: \"normal\",\n      required: true,\n      fullWidth: true,\n      name: \"password\",\n      label: \"Password\",\n      type: \"password\",\n      autoComplete: \"current-password\",\n      defaultValue: \"\",\n      value: formValues === null || formValues === void 0 ? void 0 : formValues.password,\n      onChange: formChangeHandler,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }), __jsx(Box, {\n      className: styles.box,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }\n    }, __jsx(FormControlLabel, {\n      control: __jsx(Checkbox, {\n        value: \"remember\",\n        color: \"primary\",\n        onChange: checkBoxChangeHandler,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 17\n        }\n      }),\n      label: \"Se souvenir de moi\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 13\n      }\n    })), __jsx(ClassicButton, {\n      fullWidth: true,\n      variant: \"contained\",\n      className: styles.submit,\n      onClick: submitHandler2,\n      disabled: !(validationResult === null || validationResult === void 0 ? void 0 : validationResult.global),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 11\n      }\n    }, \"Se connecter\"), __jsx(Grid, {\n      container: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 11\n      }\n    }, __jsx(Grid, {\n      item: true,\n      xs: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      href: \"/forgotPassword\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, \"Mot de passe oubli\\xE9 ?\")), __jsx(Grid, {\n      item: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, __jsx(Link, {\n      href: \"/signup\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 15\n      }\n    }, \"Cr\\xE9er un compte\")))));\n  };\n\n  _s(Form, \"AuG+oHx5On8LormpMwDvPF01gVg=\", false, function () {\n    return [useMutation, useGraphQLErrorDisplay, useStyles, useSessionDispatch, useCookieRedirection];\n  });\n\n  return __jsx(FormController, {\n    render: Form,\n    validationRules: validationRules,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 10\n    }\n  });\n};\n\n_c = SigninForm;\nexport default withApollo()(SigninForm);\n\nvar _c;\n\n$RefreshReg$(_c, \"SigninForm\");","map":{"version":3,"sources":["C:/Users/skaPy/IdeaProjects/Next.js-boilerplate/oozie-client/containers/forms/SigninForm.tsx"],"names":["gql","withApollo","FormController","makeStyles","Box","Container","Avatar","Typography","TextField","FormControlLabel","Checkbox","Grid","LockOutlinedIcon","ClassicButton","Link","useMutation","useCallback","useState","useEffect","useSessionDispatch","omitTypename","useGraphQLErrorDisplay","useCookieRedirection","ValidationRuleType","useStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","box","width","submit","SIGNIN","validationRules","email","rule","required","password","SigninForm","Form","props","formChangeHandler","formValues","validationResult","signin","data","error","styles","checkBoxChecked","setCheckBoxChecked","sessionDispatch","redirect","checkBoxChangeHandler","e","target","checked","submitHandler2","variables","persistentConnection","login","id","type","payload","global"],"mappings":"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","sourcesContent":["import gql from \"graphql-tag\"\r\nimport { withApollo } from \"hoc/withApollo\"\r\nimport FormController from \"components/controllers/FormController\"\r\nimport { makeStyles, Box } from \"@material-ui/core\"\r\nimport {\r\n  Container,\r\n  Avatar,\r\n  Typography,\r\n  TextField,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Grid,\r\n} from \"@material-ui/core\"\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\"\r\nimport ClassicButton from \"components/buttons/ClassicButton\"\r\nimport Link from \"components/Link\"\r\nimport { useMutation } from \"@apollo/react-hooks\"\r\nimport { useCallback, useState, useEffect } from \"react\"\r\nimport { useSessionDispatch } from \"context/session/session\"\r\nimport omitTypename from \"utils/omitTypename\"\r\nimport useGraphQLErrorDisplay from \"hooks/useGraphQLErrorDisplay\"\r\nimport useCookieRedirection from \"hooks/useCookieRedirection\"\r\nimport {\r\n  ValidationRuleType,\r\n  ValidationRules,\r\n  RenderCallback,\r\n} from \"components/controllers/FormController\"\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  paper: {\r\n    marginTop: theme.spacing(8),\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary.main,\r\n  },\r\n  box: {\r\n    width: \"100%\", // Fix IE 11 issue.\r\n    marginTop: theme.spacing(1),\r\n  },\r\n  submit: {\r\n    margin: theme.spacing(3, 0, 2),\r\n  },\r\n}))\r\n\r\nconst SIGNIN = gql`\r\n  mutation login(\r\n    $email: String!\r\n    $password: String!\r\n    $persistentConnection: Boolean!\r\n  ) {\r\n    login(\r\n      email: $email\r\n      password: $password\r\n      persistentConnection: $persistentConnection\r\n    ) {\r\n      id\r\n      surname\r\n      lastname\r\n      email\r\n      role\r\n      phone\r\n      address\r\n      postCode\r\n      city\r\n    }\r\n  }\r\n`\r\n\r\nconst validationRules: ValidationRules = {\r\n  email: {\r\n    rule: ValidationRuleType.required,\r\n  },\r\n  password: {\r\n    rule: ValidationRuleType.required,\r\n  },\r\n}\r\n\r\nconst SigninForm = () => {\r\n  const Form: RenderCallback = (props) => {\r\n    const { formChangeHandler, formValues, validationResult } = props\r\n\r\n    const [signin, { data, error }] = useMutation(SIGNIN)\r\n    useGraphQLErrorDisplay(error)\r\n    const styles = useStyles()\r\n    const [checkBoxChecked, setCheckBoxChecked] = useState(false)\r\n    const sessionDispatch = useSessionDispatch()\r\n    const redirect = useCookieRedirection()\r\n\r\n    const checkBoxChangeHandler = useCallback(\r\n      (e) => {\r\n        setCheckBoxChecked(e.target.checked)\r\n      },\r\n      [setCheckBoxChecked]\r\n    )\r\n\r\n    const submitHandler2 = useCallback(() => {\r\n      signin({\r\n        variables: {\r\n          email: formValues.email,\r\n          password: formValues.password,\r\n          persistentConnection: checkBoxChecked,\r\n        },\r\n      })\r\n    }, [checkBoxChecked, formValues, signin])\r\n\r\n    useEffect(() => {\r\n      if (data?.login?.id) {\r\n        sessionDispatch({\r\n          type: \"login\",\r\n          payload: omitTypename(data.login),\r\n        })\r\n        redirect()\r\n      }\r\n    }, [data, sessionDispatch, redirect])\r\n\r\n    return (\r\n      <Container component=\"main\" maxWidth=\"xs\">\r\n        <div className={styles.paper}>\r\n          <Avatar className={styles.avatar}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Connexion\r\n          </Typography>\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            label=\"Email Address\"\r\n            name=\"email\"\r\n            autoComplete=\"current-email\"\r\n            autoFocus\r\n            defaultValue=\"\"\r\n            value={formValues?.email}\r\n            onChange={formChangeHandler}\r\n          />\r\n          <TextField\r\n            variant=\"outlined\"\r\n            margin=\"normal\"\r\n            required\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Password\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n            defaultValue=\"\"\r\n            value={formValues?.password}\r\n            onChange={formChangeHandler}\r\n          />\r\n          <Box className={styles.box}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  value=\"remember\"\r\n                  color=\"primary\"\r\n                  onChange={checkBoxChangeHandler}\r\n                />\r\n              }\r\n              label=\"Se souvenir de moi\"\r\n            />\r\n          </Box>\r\n          <ClassicButton\r\n            fullWidth\r\n            variant=\"contained\"\r\n            className={styles.submit}\r\n            onClick={submitHandler2}\r\n            disabled={!validationResult?.global}\r\n          >\r\n            Se connecter\r\n          </ClassicButton>\r\n          <Grid container>\r\n            <Grid item xs>\r\n              {/* @ts-ignore */}\r\n              <Link href=\"/forgotPassword\">Mot de passe oublié ?</Link>\r\n            </Grid>\r\n            <Grid item>\r\n              {/* @ts-ignore */}\r\n              <Link href=\"/signup\">Créer un compte</Link>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Container>\r\n    )\r\n  }\r\n\r\n  return <FormController render={Form} validationRules={validationRules} />\r\n}\r\n\r\nexport default withApollo()(SigninForm)\r\n"]},"metadata":{},"sourceType":"module"}